import{q as E,s as L,u as R,r as c,j as e,f as C,d as p,C as s,L as N}from"./index-CFgpXi-K.js";import{u as F,a as I,A as M,o as P,s as f}from"./schemas-D4Y9G3iu.js";const D=P({email:f().email("Invalid email address").min(1,"Email is required"),password:f().min(1,"Password is required")}),_=()=>{const r=E(),v=L(),{login:w}=R(),[d,o]=c.useState(!1),[m,l]=c.useState(""),[y,k]=c.useState(!1),{register:x,handleSubmit:S,formState:{errors:a}}=F({resolver:I(D)}),A=async n=>{var h,b,u,j;o(!0),l("");try{const i=await w(n.email,n.password);if(i.success){const t=(b=(h=v.state)==null?void 0:h.from)==null?void 0:b.pathname,g=(j=(u=i.data)==null?void 0:u.user)==null?void 0:j.role;t&&t!=="/"?r(t,{replace:!0}):g==="ROLE_SUPER_ADMIN"?r("/dashboard/super-admin",{replace:!0}):g==="ROLE_ADMIN"?r("/dashboard/admin",{replace:!0}):r("/dashboard/user",{replace:!0})}else l(i.message||"Login failed. Please check your credentials.")}catch(i){l(i.message||"An error occurred during login. Please try again.")}finally{o(!1)}};return e.jsx("div",{className:"sign-in-bg",children:e.jsx("div",{className:"app-wrapper d-block",children:e.jsx("div",{className:"main-container",children:e.jsx(C,{children:e.jsxs(p,{className:"sign-in-content-bg",children:[e.jsx(s,{lg:6,className:"image-contentbox d-none d-lg-block",children:e.jsxs("div",{className:"form-container",children:[e.jsx("div",{className:"signup-content mt-4",children:e.jsx("span",{children:e.jsx("img",{src:"../assets/images/logo/1.png",alt:"Confiance",className:"img-fluid"})})}),e.jsx("div",{className:"signup-bg-img",children:e.jsx("img",{src:"../assets/images/login/04.png",alt:"Login",className:"img-fluid"})})]})}),e.jsx(s,{lg:6,className:"form-contentbox",children:e.jsx("div",{className:"form-container",children:e.jsx("form",{className:"app-form",onSubmit:S(A),children:e.jsxs(p,{children:[e.jsx(s,{xs:12,children:e.jsxs("div",{className:"mb-5 text-center text-lg-start",children:[e.jsx("h2",{className:"text-primary f-w-600",children:"Welcome to Confiance!"}),e.jsx("p",{children:"Sign in with your email and password"})]})}),m&&e.jsx(s,{xs:12,children:e.jsx(M,{color:"danger",className:"mb-3",children:m})}),e.jsx(s,{xs:12,children:e.jsxs("div",{className:"mb-3",children:[e.jsx("label",{htmlFor:"email",className:"form-label",children:"Email Address"}),e.jsx("input",{type:"email",className:`form-control ${a.email?"is-invalid":""}`,placeholder:"Enter your email",id:"email",...x("email")}),a.email&&e.jsx("div",{className:"invalid-feedback",children:a.email.message})]})}),e.jsx(s,{xs:12,children:e.jsxs("div",{className:"mb-3",children:[e.jsx("label",{htmlFor:"password",className:"form-label",children:"Password"}),e.jsx(N,{to:"/auth/password-reset",className:"link-primary float-end",children:"Forgot Password?"}),e.jsx("input",{type:"password",className:`form-control ${a.password?"is-invalid":""}`,placeholder:"Enter your password",id:"password",...x("password")}),a.password&&e.jsx("div",{className:"invalid-feedback",children:a.password.message})]})}),e.jsx(s,{xs:12,children:e.jsxs("div",{className:"form-check mb-3",children:[e.jsx("input",{className:"form-check-input",type:"checkbox",id:"rememberMe",checked:y,onChange:n=>k(n.target.checked)}),e.jsx("label",{className:"form-check-label text-secondary",htmlFor:"rememberMe",children:"Remember me"})]})}),e.jsx(s,{xs:12,children:e.jsx("div",{className:"mb-3",children:e.jsx("button",{type:"submit",className:"btn btn-primary w-100",disabled:d,children:d?e.jsxs(e.Fragment,{children:[e.jsx("span",{className:"spinner-border spinner-border-sm me-2",role:"status","aria-hidden":"true"}),"Signing in..."]}):"Sign In"})})}),e.jsx(s,{xs:12,children:e.jsxs("div",{className:"text-center text-lg-start mb-3",children:["Don't have an account?"," ",e.jsx(N,{to:"/auth/sign-up",className:"link-primary text-decoration-underline",children:"Sign up"})]})}),e.jsx(s,{xs:12,children:e.jsxs("div",{className:"alert alert-info text-sm",children:[e.jsx("strong",{children:"Demo Credentials:"}),e.jsxs("ul",{className:"mb-0 mt-2",children:[e.jsxs("li",{children:[e.jsx("strong",{children:"Super Admin:"})," ","superadmin@confiance.com / Admin@123"]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Admin:"})," admin@confiance.com / Admin@123"]})]})]})}),e.jsx("div",{className:"app-divider-v justify-content-center",children:e.jsx("p",{children:"Or sign in with"})}),e.jsx(s,{xs:12,children:e.jsxs("div",{className:"text-center",children:[e.jsx("button",{type:"button",className:"btn btn-facebook icon-btn b-r-22 m-1",disabled:!0,children:e.jsx("i",{className:"ti ti-brand-facebook text-white"})}),e.jsx("button",{type:"button",className:"btn btn-gmail icon-btn b-r-22 m-1",disabled:!0,children:e.jsx("i",{className:"ti ti-brand-google text-white"})}),e.jsx("button",{type:"button",className:"btn btn-github icon-btn b-r-22 m-1",disabled:!0,children:e.jsx("i",{className:"ti ti-brand-github text-white"})})]})})]})})})})]})})})})})};export{_ as default};

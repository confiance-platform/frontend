import{r as d,R as l,o as u,n as a,p as $,m as I,c as D,t as S}from"./index-CFgpXi-K.js";var U=d.createContext(),F=d.createContext();function z(t){var r=t.children,o=d.useState(null),n=o[0],e=o[1],i=d.useRef(!1);d.useEffect(function(){return function(){i.current=!0}},[]);var s=d.useCallback(function(c){i.current||e(c)},[]);return d.createElement(U.Provider,{value:n},d.createElement(F.Provider,{value:s},r))}var A=l.createContext({}),L=l.createContext({});function E(t){"@babel/helpers - typeof";return E=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(r){return typeof r}:function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},E(t)}var G=["className","cssModule","direction","isOpen","group","size","nav","setActiveFromChild","active","tag","menuRole"];function T(){return T=Object.assign?Object.assign.bind():function(t){for(var r=1;r<arguments.length;r++){var o=arguments[r];for(var n in o)Object.prototype.hasOwnProperty.call(o,n)&&(t[n]=o[n])}return t},T.apply(this,arguments)}function g(t,r,o){return r in t?Object.defineProperty(t,r,{value:o,enumerable:!0,configurable:!0,writable:!0}):t[r]=o,t}function V(t,r){if(t==null)return{};var o=B(t,r),n,e;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(e=0;e<i.length;e++)n=i[e],!(r.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(o[n]=t[n])}return o}function B(t,r){if(t==null)return{};var o={},n=Object.keys(t),e,i;for(i=0;i<n.length;i++)e=n[i],!(r.indexOf(e)>=0)&&(o[e]=t[e]);return o}function q(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")}function H(t,r){for(var o=0;o<r.length;o++){var n=r[o];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function J(t,r,o){return r&&H(t.prototype,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function Q(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(r&&r.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),r&&x(t,r)}function x(t,r){return x=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,e){return n.__proto__=e,n},x(t,r)}function X(t){var r=Z();return function(){var n=_(t),e;if(r){var i=_(this).constructor;e=Reflect.construct(n,arguments,i)}else e=n.apply(this,arguments);return Y(this,e)}}function Y(t,r){if(r&&(E(r)==="object"||typeof r=="function"))return r;if(r!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return v(t)}function v(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Z(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function _(t){return _=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(o){return o.__proto__||Object.getPrototypeOf(o)},_(t)}var ee={a11y:u.bool,disabled:u.bool,direction:u.oneOf(["up","down","start","end","left","right"]),group:u.bool,isOpen:u.bool,nav:u.bool,active:u.bool,size:u.string,tag:S,toggle:u.func,children:u.node,className:u.string,cssModule:u.object,dropup:u.bool,inNavbar:u.bool,setActiveFromChild:u.bool,menuRole:u.oneOf(["listbox","menu"])},te={a11y:!0,isOpen:!1,direction:"down",nav:!1,active:!1,inNavbar:!1,setActiveFromChild:!1},ne=[a.space,a.enter,a.up,a.down,a.end,a.home],M=function(t){Q(o,t);var r=X(o);function o(n){var e;return q(this,o),e=r.call(this,n),e.addEvents=e.addEvents.bind(v(e)),e.handleDocumentClick=e.handleDocumentClick.bind(v(e)),e.handleKeyDown=e.handleKeyDown.bind(v(e)),e.removeEvents=e.removeEvents.bind(v(e)),e.toggle=e.toggle.bind(v(e)),e.handleMenuRef=e.handleMenuRef.bind(v(e)),e.handleToggleRef=e.handleToggleRef.bind(v(e)),e.containerRef=l.createRef(),e.menuRef=l.createRef(),e.toggleRef=l.createRef(),e}return J(o,[{key:"componentDidMount",value:function(){this.handleProps()}},{key:"componentDidUpdate",value:function(e){this.props.isOpen!==e.isOpen&&this.handleProps()}},{key:"componentWillUnmount",value:function(){this.removeEvents()}},{key:"handleMenuRef",value:function(e){this.menuRef.current=e}},{key:"handleToggleRef",value:function(e){this.toggleRef.current=e}},{key:"handleDocumentClick",value:function(e){if(!(e&&(e.which===3||e.type==="keyup"&&e.which!==a.tab))){var i=this.getContainer(),s=this.getMenu(),c=this.getToggle();if(c){var y=c.contains(e.target),f=s&&s.contains(e.target)&&s!==e.target,h=!1;i&&(h=i.classList.contains("input-group")&&i.classList.contains("dropdown")&&e.target.tagName==="INPUT"),!((y&&!h||f)&&(e.type!=="keyup"||e.which===a.tab))&&this.toggle(e)}}}},{key:"handleKeyDown",value:function(e){var i=this,s=e.target.getAttribute("role")==="menuitem"||e.target.getAttribute("role")==="option",c=this.getMenuCtrl()===e.target,y=a.tab===e.which;if(!(/input|textarea/i.test(e.target.tagName)||y&&!this.props.a11y||y&&!(s||c))&&((ne.indexOf(e.which)!==-1||e.which>=48&&e.which<=90)&&e.preventDefault(),!this.props.disabled)){if(c)if([a.space,a.enter,a.up,a.down].indexOf(e.which)>-1)this.props.isOpen||this.toggle(e),setTimeout(function(){var O;return(O=i.getMenuItems()[0])===null||O===void 0?void 0:O.focus()});else if(this.props.isOpen&&y){var f;e.preventDefault(),(f=this.getMenuItems()[0])===null||f===void 0||f.focus()}else this.props.isOpen&&e.which===a.esc&&this.toggle(e);if(this.props.isOpen&&s){if([a.tab,a.esc].indexOf(e.which)>-1)this.toggle(e),this.getMenuCtrl().focus();else if([a.space,a.enter].indexOf(e.which)>-1)e.target.click(),this.getMenuCtrl().focus();else if([a.down,a.up].indexOf(e.which)>-1||[a.n,a.p].indexOf(e.which)>-1&&e.ctrlKey){var h=this.getMenuItems(),p=h.indexOf(e.target);a.up===e.which||a.p===e.which&&e.ctrlKey?p=p!==0?p-1:h.length-1:(a.down===e.which||a.n===e.which&&e.ctrlKey)&&(p=p===h.length-1?0:p+1),h[p].focus()}else if(a.end===e.which){var w=this.getMenuItems();w[w.length-1].focus()}else if(a.home===e.which){var R=this.getMenuItems();R[0].focus()}else if(e.which>=48&&e.which<=90)for(var m=this.getMenuItems(),k=String.fromCharCode(e.which).toLowerCase(),b=0;b<m.length;b+=1){var j=m[b].textContent&&m[b].textContent[0].toLowerCase();if(j===k){m[b].focus();break}}}}}},{key:"handleProps",value:function(){this.props.isOpen?this.addEvents():this.removeEvents()}},{key:"getContextValue",value:function(){return{toggle:this.toggle,isOpen:this.props.isOpen,direction:this.props.direction==="down"&&this.props.dropup?"up":this.props.direction,inNavbar:this.props.inNavbar,disabled:this.props.disabled,onMenuRef:this.handleMenuRef,onToggleRef:this.handleToggleRef,menuRole:this.props.menuRole}}},{key:"getContainer",value:function(){return this.containerRef.current}},{key:"getMenu",value:function(){return this.menuRef.current}},{key:"getToggle",value:function(){return this.toggleRef.current}},{key:"getMenuCtrl",value:function(){return this._$menuCtrl?this._$menuCtrl:(this._$menuCtrl=this.getToggle(),this._$menuCtrl)}},{key:"getItemType",value:function(){return this.props.menuRole==="listbox"?"option":"menuitem"}},{key:"getMenuItems",value:function(){var e=this.getMenu()||this.getContainer();return[].slice.call(e.querySelectorAll('[role="'.concat(this.getItemType(),'"]')))}},{key:"addEvents",value:function(){var e=this;["click","touchstart","keyup"].forEach(function(i){return document.addEventListener(i,e.handleDocumentClick,!0)})}},{key:"removeEvents",value:function(){var e=this;["click","touchstart","keyup"].forEach(function(i){return document.removeEventListener(i,e.handleDocumentClick,!0)})}},{key:"toggle",value:function(e){return this.props.disabled?e&&e.preventDefault():this.props.toggle(e)}},{key:"render",value:function(){var e,i=this,s=$(this.props,["toggle","disabled","inNavbar","a11y"]),c=s.className,y=s.cssModule,f=s.direction,h=s.isOpen,p=s.group,w=s.size,R=s.nav,m=s.setActiveFromChild,k=s.active,b=s.tag;s.menuRole;var j=V(s,G),O=b||(R?"li":"div"),K=!1;m&&l.Children.map(this.props.children[1].props.children,function(C){C&&C.props.active&&(K=!0)});var W=I(D(c,R&&k?"active":!1,m&&K?"active":!1,(e={"btn-group":p},g(e,"btn-group-".concat(w),!!w),g(e,"dropdown",!p),g(e,"dropup",f==="up"),g(e,"dropstart",f==="start"||f==="left"),g(e,"dropend",f==="end"||f==="right"),g(e,"show",h),g(e,"nav-item",R),e)),y);return this.context.insideInputGroup?l.createElement(A.Provider,{value:this.getContextValue()},l.createElement(z,null,l.Children.map(this.props.children,function(C){return l.cloneElement(C,{onKeyDown:i.handleKeyDown})}))):l.createElement(A.Provider,{value:this.getContextValue()},l.createElement(z,null,l.createElement(O,T({},j,g({},typeof O=="string"?"ref":"innerRef",this.containerRef),{onKeyDown:this.handleKeyDown,className:W}))))}}]),o}(l.Component);M.propTypes=ee;M.defaultProps=te;M.contextType=L;var re=["className","cssModule","tag","type","size"];function P(){return P=Object.assign?Object.assign.bind():function(t){for(var r=1;r<arguments.length;r++){var o=arguments[r];for(var n in o)Object.prototype.hasOwnProperty.call(o,n)&&(t[n]=o[n])}return t},P.apply(this,arguments)}function oe(t,r){if(t==null)return{};var o=ie(t,r),n,e;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(e=0;e<i.length;e++)n=i[e],!(r.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(o[n]=t[n])}return o}function ie(t,r){if(t==null)return{};var o={},n=Object.keys(t),e,i;for(i=0;i<n.length;i++)e=n[i],!(r.indexOf(e)>=0)&&(o[e]=t[e]);return o}var ae={className:u.string,cssModule:u.object,size:u.string,tag:S,type:u.string};function se(t){var r=t.className,o=t.cssModule,n=t.tag,e=n===void 0?"div":n;t.type;var i=t.size,s=oe(t,re),c=I(D(r,"input-group",i?"input-group-".concat(i):null),o);return t.type==="dropdown"?l.createElement(M,P({},s,{className:c})):l.createElement(L.Provider,{value:{insideInputGroup:!0}},l.createElement(e,P({},s,{className:c})))}se.propTypes=ae;var ue=["className","cssModule","tag"];function N(){return N=Object.assign?Object.assign.bind():function(t){for(var r=1;r<arguments.length;r++){var o=arguments[r];for(var n in o)Object.prototype.hasOwnProperty.call(o,n)&&(t[n]=o[n])}return t},N.apply(this,arguments)}function le(t,r){if(t==null)return{};var o=ce(t,r),n,e;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(e=0;e<i.length;e++)n=i[e],!(r.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(o[n]=t[n])}return o}function ce(t,r){if(t==null)return{};var o={},n=Object.keys(t),e,i;for(i=0;i<n.length;i++)e=n[i],!(r.indexOf(e)>=0)&&(o[e]=t[e]);return o}var fe={className:u.string,cssModule:u.object,tag:S};function pe(t){var r=t.className,o=t.cssModule,n=t.tag,e=n===void 0?"span":n,i=le(t,ue),s=I(D(r,"input-group-text"),o);return l.createElement(e,N({},i,{className:s}))}pe.propTypes=fe;export{se as I,pe as a};
